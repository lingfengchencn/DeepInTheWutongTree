# Change Proposal: Split Presentation Shell & AI-Controlled Navigation

## Why
- 评审展示需要同时看到“小程序前端”与“AI 后端状态”，现有全屏 UI 无法并排呈现。
- 需引入手动导航按钮，让讲解员可快速跳转首页/洋房详情/室内视角，并中断脚本。
- 页面切换应由 AI 事件驱动，不再定时自动过渡，确保演示节奏由对话控制。

## What Changes
- 将界面分为左右两栏：左侧保留小程序式导览，右侧新增 AI 状态面板、对话队列、快捷按钮。
- 按钮：刷新、首页、洋房详情、洋房内景；点击暂停当前脚本并更新视图/阶段。
- 改造脚本执行器：仅在收到后端推送的 `navigateTo` 时切换视图；按钮操作会停止脚本，等待新对话。
- 模拟后端的脚本 push API，允许右侧面板触发下一段对话（替代现有自动脚本）。

## Success Metrics
- 演示时可同时看到地图/模型与 AI 内部状态，切换按钮响应 < 200ms。
- 脚本在按钮点击后停止播放，不再自动跳转；继续由后台 push 触发。
- 所有导航由 `navigateTo` 事件驱动，未收到导航事件时视图保持不变。

## Scope
- **In Scope**: UI 分栏布局、AI 状态面板、快捷按钮逻辑、脚本执行器改造、模拟后台。
- **Out of Scope**: 实际服务端接入、真实多线程音频同步。

## Dependencies
- 现有 React + Zustand 状态管理、脚本模型。
- 新增“mock 后端”模块提供脚本队列。

## Key Decisions
- 采用客户端模拟的后端消息流（Promise/async generator）驱动脚本。
- 状态面板展示当前脚本队列、按钮状态、最后一次导航。

## Open Questions
- 状态面板具体需要展示哪些调试信息（音频加载、highlight）？
- 快捷按钮是否需可配置目标洋房？

## Risks & Mitigations
- **脚本中断**：按钮停止播放，需要明确提示“等待 AI 下一步”。
- **并排布局空间**：在 1200px 容器内协调两栏宽度、保持地图可视。
- **用户手动导航后脚本恢复**：提供显式“继续播放”按钮或等待后端 push。

## Timeline (Target)
- T+2：完成布局与状态面板原型；
- T+4：实现按钮逻辑与脚本中断；
- T+6：接入 mock 后端 push；
- T+7：调优 UI/UX。
